---
title: MisskeyでMinioをS3ストレージとして使うときの設定メモ (11.30.0)
permalink: /p/f47084d13d2e4926b93376501818c19c
tags: []
date: 2019-12-21 02:05:00
updated: 2021-07-29 01:40:25
---

## 前書き

S3 の設定をしようとしたが Minio の場合の設定のノウハウがあまり見つからなかったのでメモしておく

Misskey のバージョンは v11.30.0。v11 の最初の頃は yaml で設定だった記述もあったが、

このバージョンでは Web UI から設定可能となっている。

## 環境

- misskey が動作するホストとは別に Minio による S3 ストレージサーバーがある
- Minio のバケットの設定で `*` に `read` の権限がある

## 設定値

### URL

外から見える URL。

設定例 <a href="https://blob.example.com/mymisskey"><https://blob.example.com/mymisskey>

### バケット名

Minio バケット名。そのままですね。

このバケットを作ってくれるわけではないので事前に Minio の Web UI 等から作成する必要がある。

### プレフィックス

指定したプレフィックスのディレクトリ（表現は正しくないですが）が作成される。

オプションなので空欄でも良い。。 当方の設定は drive。

### エンドポイント

Minio にアクセスする為の URL。 http(s)は付けない。（SSL を使用チェックボックスで決まる）

ポート番号を指定することもできる。この記事はこの点をメモするために書いた。

設定例 192.168.1.123:9000

### リージョン

Minio であれば空欄で OK

### ポート

エンドポイントに使用するポートだと思っていたが違うようだ。

とりあえず、エンドポイントのポート番号を入れてある

### アクセスキー/シークレットキー

Minio の起動時に表示されている値をそのまま入れれば良い
