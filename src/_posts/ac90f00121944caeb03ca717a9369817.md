---
title: 普段使いのLinux PCのグラボを交換したら快適になった
permalink: /p/ac90f00121944caeb03ca717a9369817
tags: []
date: 2020-09-08 04:47:00
updated: 2021-07-29 01:29:08
---

## 前提条件

- 4K モニタ + フル HD モニタのデュアル
- Linux Mint 20
- Core i5 6500 / 24GB メモリ

## tl;dr;

前提条件としてデュアルディスプレイするのであれば、グラボはメモリ 4GB 積んでるやつを選ぶべき。

GeForce だと 1050 とか 1650 とか。 AMD だと RX460, 560 あたり？

## 変更の経緯

そもそも、Skylake の内蔵 GPU は 4K+フル HD のデュアル出力が可能…だが

どうやっても、不具合が解消できなかった。 フル HD ＋フル HD であれば全然問題ないのだが、

HiDPI を設定するとマウスカーソルがちらついてしまうのがどうしても解消できなかった。

仕方がないので、できるだけ安い、４ K 出力なグラボを探した結果、Quadro K620 を見つけた。

中指を立てられてしまう nvidia だけれども、プロプライエタリドライバは Jetson Nano で割とよく動くというのは

経験していた。 のと、本当は AMD 系がほしかったけれどもお高かった。今なら RX シリーズがマイニング用とかで

お安くでているのでそれを買うと良いかもしれない。

話を元に戻すと、Quadro は普通に動いた。 チラツキとも無縁だし、Youtube も普通に見れる。

が、雀魂（麻雀はよくわからないけれども、3D の HTML5 ゲームとしてベンチマークにつかってる）を動かすと

もう見事なコマ送り。 なるほど Linux デスクトップのパフォーマンスってこんなもんか…

ブラウザが GPU アクセラレーション使えてないっぽいし、そんなもんよね。と愚痴っていたのです。

（間違ってます。そんなもんじゃないです）

ある日、ふと、`nvidia-smi`コマンドを打ってみると、VRAM の使用量が割と最大値に近い値になっていた。

(1800MiB/1900MiB みたいな値）

これはもしかして、VRAM 足りてない…？ と思い、うちで 4K 出力が可能なまともなグラボの GeForce 1060(6GB)を

ゲーム用 PC からもってきた（HP のケースから交換した甲斐があった。なお、電源も交換している）

グラボを交換して初起動。nvidia プロプライエタリドライバを使っているので特に問題なく起動、

HiDPI の設定をしてブラウザを触っていると、なんか軽い。もうこの時点でちょっと違うかもしれないという感じがする。

試しに雀魂を起動してみる。もうアニメーションが全然違う。ログイン画面のさくらの花びらがちゃんと動いている。

今まではこの時点でカクカク、グラフィック処理が間に合わなくてタイムアウトになるくらいだったのが全く問題ない。

プレイしてみても快適だった。なんてこった。 もう一枚のモニタで YouTube 動画を再生しても余裕。 `nvidia-smi`してみると…

```
`|===============================+======================+======================|
|   0  GeForce GTX 106...  Off  | 00000000:01:00.0  On |                  N/A |
|  0%   51C    P0    29W / 120W |   2988MiB /  6044MiB |     16%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A       897      G   /usr/lib/xorg/Xorg               1385MiB |
|    0   N/A  N/A      2109      G   cinnamon                          122MiB |
|    0   N/A  N/A      2951      G   ...o/bin/firefox/firefox-bin      625MiB |
|    0   N/A  N/A      3627      G   ...AAAAAAAAA= --shared-files       71MiB |
|    0   N/A  N/A     84089    C+G   ...AAAAAAAAA= --shared-files      461MiB |
|    0   N/A  N/A     87428      G   ...AAAAAAAAA= --shared-files      247MiB |
|    0   N/A  N/A    363160      G   ...o/bin/firefox/firefox-bin        1MiB |
|    0   N/A  N/A    428987      G   ...o/bin/firefox/firefox-bin       65MiB |
+-----------------------------------------------------------------------------+
```

もう既に 2988MiB も使っている。 そりゃあメモリ 2GB の Quadro じゃ重くなるわ…

（同じ構成で Windows なら問題なく動くと思われる）

Linux デスクトップは快適に動くけれども、富豪的なところがあるのでパワーある構成にする必要があるという学びを得た。
